package com.jmt.demo.service;

import java.util.HashMap;

import org.springframework.stereotype.Service;

import com.jmt.demo.model.mapSuggestResponse;
import com.jmt.demo.util.RestApiUtil;

/**
 * UTF-8로 인코딩 필수
 * 안 그러면 다른 사람 파일에서 깨질 수 있습니다
 */
@Service
public class mapSuggestService {

	private static final String SECRETKEY = "FhVdLivdQhcnz0qp01tF9t87mWZunIvLMJI0tIfzg0CaMu296y0tKhHIw1Bim+DvQxtmkibO6WN4XMfZOlAMeQ==";
	
	// ???? ????_????? API ????? ?????? ????? ???? ???
	public mapSuggestResponse apiTest() {
		String url = "	http://apis.data.go.kr/B551011/KorService1";

		// ???????(Request Parameter)?? ??????? ???? map ????
		HashMap<String, String> data = new HashMap<String, String>();
		data.put("ServiceKey", SECRETKEY);
		data.put("numOfRows", "10");
		data.put("pageNo", "1");
		data.put("_type", "Json");
		data.put("listYN", "Y");
		data.put("arrange", "A");
		data.put("mapX", "126.981611");
		data.put("mapY", "37.568477");
		data.put("radius", "1000");
		data.put("contentTypeId	", "15");
		
		
		HashMap<String, String> headerData = new HashMap<String, String>();
		headerData.put("Content-type", "application/json");
		
		// ???? API??? ?? ?????? ??? ??? ConnHttpGetType ????? ???
		// url : ????? ???
		// data : ????? ????? ??????
		// headerData : ????? http ????? ????? ??????
		// TestResponse.class : ?????? ?????? ????? ???(??? ???)
		mapSuggestResponse result = RestApiUtil.ConnHttpGetType(url, data, headerData, mapSuggestResponse.class);
		
		return result;
		
	}
}
